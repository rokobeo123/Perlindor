import{g as y,R as N,h as R,r as a,j as e,k as m,A as E,X as S}from"./index-DEi-CVTT.js";const $=y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),A=y("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),T=y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),O=y("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),V=y("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),D=y("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),H=()=>{const{data:n}=R(),l=a.useRef(null),[v,d]=a.useState(null),[o,x]=a.useState(0),[r,p]=a.useState(!1),[z,f]=a.useState(!1),s=a.useMemo(()=>n.gallery||[],[n.gallery]),g=a.useMemo(()=>n.videos||[],[n.videos]),C=a.useCallback((t,i)=>{d(t),x(i),p(!0)},[]),I=a.useCallback(()=>{p(!1)},[]);a.useEffect(()=>{if(!r){const t=setTimeout(()=>{d(null),f(!1)},100);return()=>clearTimeout(t)}},[r]);const c=a.useCallback(()=>{f(t=>!t)},[]),h=a.useCallback(()=>{const t=(o+1)%s.length;d(s[t]),x(t)},[o,s]),w=a.useCallback(()=>{const t=(o-1+s.length)%s.length;d(s[t]),x(t)},[o,s]),L=a.useCallback(t=>{var i,b;return t?t.includes("youtu.be/")?`https://www.youtube.com/embed/${(i=t.split("youtu.be/")[1])==null?void 0:i.split("?")[0]}?rel=0&modestbranding=1&showinfo=0`:t.includes("youtube.com/watch?v=")?`https://www.youtube.com/embed/${(b=t.split("v=")[1])==null?void 0:b.split("&")[0]}?rel=0&modestbranding=1&showinfo=0`:t:""},[]),j=N.memo(({photo:t,index:i,onOpen:b})=>{const[k,M]=a.useState(!1);return e.jsxs(m.div,{initial:{opacity:0,scale:.9,rotateZ:Math.random()*8-4},whileInView:{opacity:1,scale:1,rotateZ:0},viewport:{once:!0,margin:"-50px"},transition:{delay:Math.min(i*.05,.3),duration:.4,type:"spring",stiffness:100},className:"relative group transform-gpu will-change-transform",children:[e.jsxs(m.div,{whileHover:{scale:1.05,rotate:0,boxShadow:"0 0 30px rgba(201, 167, 245, 0.6)"},transition:{duration:.2},className:"polaroid glass cursor-pointer overflow-hidden",onClick:()=>b(t,i),children:[e.jsxs("div",{className:"relative overflow-hidden rounded-lg h-64",children:[e.jsx("img",{src:t.url,alt:t.caption,className:`w-full h-full object-cover transition-opacity duration-300 ${k?"opacity-100":"opacity-0"}`,loading:"lazy",onLoad:()=>M(!0),onError:()=>M(!0)}),!k&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-lavender-200/10 to-pink-300/10 animate-pulse rounded-lg"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-lavender-200/10 via-pink-300/10 to-mint-300/10 opacity-0 group-hover:opacity-50 transition-opacity duration-300"})]}),e.jsx("p",{className:"font-pacifico text-center text-midnight mt-4 text-lg px-2 pb-2",children:t.caption})]}),e.jsx("div",{className:"absolute -top-2 -right-2 text-3xl opacity-70 filter drop-shadow-lg z-10",children:["ðŸ’œ","â­","âœ¨","ðŸŒ™","ðŸ’«","ðŸ¦‹"][i%6]})]})}),u=N.memo(({video:t,index:i})=>e.jsxs(m.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{delay:Math.min(i*.05,.2),duration:.4},className:"group relative transform-gpu",children:[e.jsxs("div",{className:"glass rounded-xl p-4 blur-shadow h-full flex flex-col border border-white/10 hover:border-lavender-200/30 transition-all duration-200",children:[e.jsx("h3",{className:"font-fredoka text-lg text-lavender-200 mb-3 text-center line-clamp-2 min-h-[3rem] flex items-center justify-center",children:t.title}),e.jsx("div",{className:"relative rounded-lg overflow-hidden bg-dark-lighter flex-grow",children:e.jsx("div",{className:"aspect-video relative",children:e.jsx("iframe",{src:L(t.url),title:t.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full absolute inset-0",style:{border:"none"},loading:"lazy",referrerPolicy:"strict-origin-when-cross-origin"})})})]}),e.jsx("div",{className:"absolute -top-2 -right-2 text-xl opacity-60",children:["ðŸŽ¬","ðŸ“¹","ðŸŽ¥"][i%3]})]}));return a.useEffect(()=>{const t=()=>{r&&(document.body.style.overflow="hidden")},i=()=>{document.body.style.overflow="unset"};if(r)return t(),()=>{const b=setTimeout(i,100);return()=>clearTimeout(b)}},[r]),e.jsxs("div",{ref:l,className:"min-h-screen pt-20 px-4 pb-16 overflow-y-auto",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(m.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[e.jsxs("h1",{className:"font-baloo text-4xl md:text-5xl font-bold text-lavender-200 mb-3 flex items-center justify-center gap-3",children:[e.jsx(O,{className:"text-pink-300",size:48}),"Khoáº£nh Kháº¯c ÄÃ¡ng Nhá»›"]}),e.jsx("p",{className:"font-pacifico text-xl md:text-2xl text-mint-300",children:"HÃ nh trÃ¬nh cá»§a chÃºng tÃ´i Ä‘Æ°á»£c lÆ°u giá»¯ âœ¨"})]}),e.jsxs("section",{className:"mb-16",children:[e.jsx(m.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0,margin:"-50px"},className:"font-fredoka text-3xl md:text-4xl font-bold text-lavender-200 mb-8 text-center",children:"ðŸ“¸ ThÆ° Viá»‡n áº¢nh"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map((t,i)=>e.jsx(j,{photo:t,index:i,onOpen:C},t.id||i))})]}),e.jsxs("section",{className:"mb-16",children:[e.jsx(m.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0,margin:"-50px"},className:"font-fredoka text-3xl md:text-4xl font-bold text-lavender-200 mb-8 text-center",children:"ðŸŽ¬ Video Highlights"}),g.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((t,i)=>e.jsx(u,{video:t,index:i},t.id||i))}):e.jsxs("div",{className:"text-center py-10 glass rounded-xl border border-white/10",children:[e.jsx("div",{className:"text-5xl mb-4 opacity-40",children:"ðŸŽ¥"}),e.jsx("h3",{className:"font-fredoka text-xl text-lavender-200 mb-3",children:"ChÆ°a cÃ³ video nÃ o"}),e.jsx("p",{className:"font-nunito text-mint-300",children:"Quáº£n trá»‹ viÃªn sáº½ thÃªm video sá»›m nháº¥t!"})]})]})]}),e.jsx(E,{onExitComplete:()=>{d(null),f(!1)},children:r&&v&&e.jsx(U,{selectedImage:v,isFullscreen:z,currentImageIndex:o,gallery:s,onClose:I,onNext:h,onPrev:w,onToggleFullscreen:c},"image-modal")})]})},U=N.memo(({selectedImage:n,isFullscreen:l,currentImageIndex:v,gallery:d,onClose:o,onNext:x,onPrev:r,onToggleFullscreen:p})=>{const z=a.useRef(null),[f,s]=a.useState(!1),g=a.useRef(null),C=a.useCallback(async(c,h)=>{try{const L=await(await fetch(c)).blob(),j=window.URL.createObjectURL(L),u=document.createElement("a");u.href=j,u.download=`${h||"image"}.jpg`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(j)}catch(w){console.error("Download failed:",w)}},[]),I=a.useCallback(c=>{g.current===c.target&&o()},[o]);return a.useEffect(()=>{const c=h=>{switch(h.key===" "&&h.preventDefault(),h.key){case"Escape":o();break;case"ArrowRight":case" ":x();break;case"ArrowLeft":r();break;case"f":case"F":p();break}};return window.addEventListener("keydown",c,{passive:!1}),()=>window.removeEventListener("keydown",c)},[o,x,r,p]),a.useEffect(()=>{s(!1)},[n==null?void 0:n.id]),e.jsxs(e.Fragment,{children:[e.jsx(m.div,{ref:g,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-sm",onClick:I}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:e.jsx(m.div,{ref:z,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,ease:"easeOut"},className:`relative pointer-events-auto ${l?"w-full h-full":"w-full max-w-6xl max-h-[90vh] mx-4"}`,onClick:c=>c.stopPropagation(),children:e.jsxs("div",{className:`relative bg-dark-lighter overflow-hidden shadow-2xl ${l?"w-full h-full rounded-none":"rounded-xl border border-white/10"}`,children:[e.jsxs("div",{className:"absolute top-4 right-4 z-20 flex gap-2",children:[e.jsx("button",{onClick:p,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 ${l?"bg-white/20 hover:bg-white/30":"bg-black/60 hover:bg-black/80"}`,title:l?"ThoÃ¡t toÃ n mÃ n hÃ¬nh (F)":"ToÃ n mÃ n hÃ¬nh (F)",children:l?e.jsx(D,{size:20,className:"text-white"}):e.jsx(V,{size:20,className:"text-white"})}),e.jsx("button",{onClick:()=>C(n.url,n.caption),className:"w-10 h-10 rounded-full bg-black/60 hover:bg-black/80 flex items-center justify-center transition-all duration-200",title:"Táº£i xuá»‘ng",children:e.jsx(T,{size:20,className:"text-white"})}),e.jsx("button",{onClick:o,className:"w-10 h-10 rounded-full bg-black/60 hover:bg-black/80 flex items-center justify-center transition-all duration-200",title:"ÄÃ³ng (ESC)",children:e.jsx(S,{size:20,className:"text-white"})})]}),d.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:r,className:`absolute left-4 top-1/2 -translate-y-1/2 z-20 w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 ${l?"bg-white/20 hover:bg-white/30":"bg-black/60 hover:bg-black/80"}`,title:"áº¢nh trÆ°á»›c (â†)",children:e.jsx($,{size:24,className:"text-white"})}),e.jsx("button",{onClick:x,className:`absolute right-4 top-1/2 -translate-y-1/2 z-20 w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 ${l?"bg-white/20 hover:bg-white/30":"bg-black/60 hover:bg-black/80"}`,title:"áº¢nh tiáº¿p (â†’ hoáº·c Space)",children:e.jsx(A,{size:24,className:"text-white"})})]}),e.jsxs("div",{className:`w-full h-full flex items-center justify-center ${l?"p-2":"p-4 md:p-8"}`,children:[!f&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 rounded-full border-3 border-lavender-200/30 border-t-lavender-200 animate-spin"})}),e.jsx("img",{src:n.url,alt:n.caption,className:`max-w-full max-h-full object-contain transition-opacity duration-200 ${f?"opacity-100":"opacity-0"}`,style:{maxHeight:"calc(90vh - 120px)"},onLoad:()=>s(!0),onError:()=>s(!0)})]}),e.jsxs("div",{className:`absolute left-0 right-0 ${l?"bottom-4":"bottom-0"} bg-gradient-to-t from-black/80 via-black/60 to-transparent p-6`,children:[e.jsx("p",{className:"font-pacifico text-xl md:text-2xl text-white text-center",children:n==null?void 0:n.caption}),e.jsxs("p",{className:"font-nunito text-sm text-white/70 text-center mt-2",children:["áº¢nh ",v+1,"/",d.length]})]})]})})})]})}),K=N.memo(H);export{K as default};
