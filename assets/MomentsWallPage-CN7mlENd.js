import{g as ie,h as oe,r as m,j as e,A as Z,k as c,X as A,l as ce}from"./index-BlD2Obq6.js";import{P as de,L as P,U as me,C as xe,v as he,a as ue}from"./adminUpload-CgD4GqvW.js";import{M as pe,H as L,S as fe}from"./send-DyN1i_5y.js";import{C as ge,T as ve}from"./trash-2-DHU21Elo.js";const V=ie("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),we=()=>{var G,Q;const{data:v,addItem:ee,updateItem:z}=oe(),[k,M]=m.useState(!1),[d,g]=m.useState({image:"",caption:"",sticker:"ğŸ’œ"}),[u,H]=m.useState(!1),[F,y]=m.useState(0),[f,w]=m.useState(null),[be,b]=m.useState(!1),[$,T]=m.useState(null),[s,j]=m.useState(null),[C,D]=m.useState(""),[E,_]=m.useState(!1),[r,O]=m.useState(""),[te,p]=m.useState(!1),I=m.useRef(null),se=["ğŸ’œ","â­","âœ¨","ğŸŒ™","ğŸ’«","ğŸ¦‹","ğŸŒ¸","ğŸ€","ğŸ’–","â˜ï¸"];m.useEffect(()=>{const t=localStorage.getItem("momentsWall_username");t?O(t):p(!0)},[]),m.useEffect(()=>{r.trim()&&localStorage.setItem("momentsWall_username",r.trim())},[r]);const R=()=>{try{const t=localStorage.getItem("momentsWall_liked");return t?JSON.parse(t):[]}catch(t){return console.error("Error parsing liked moments:",t),[]}},N=t=>R().includes(t);m.useEffect(()=>{s&&I.current&&I.current.scrollIntoView({behavior:"smooth"})},[(G=s==null?void 0:s.comments)==null?void 0:G.length]);const ne=async t=>{const n=t.target.files[0];if(!n)return;const l=he(n);if(!l.valid){alert(l.error);return}H(!0),y(0),w(null),T(null);const i=setInterval(()=>{y(a=>a>=90?(clearInterval(i),90):a+10)},300);try{const a=await ue(n);if(clearInterval(i),y(100),a.success)g(o=>({...o,image:a.url})),w({url:a.url,thumbnail:a.thumb||a.url,size:a.size,isTemporary:a.isTemporary||!1}),navigator.clipboard&&(navigator.clipboard.writeText(a.url),b(!0),setTimeout(()=>b(!1),3e3));else throw new Error("Upload khÃ´ng thÃ nh cÃ´ng")}catch(a){console.error("Upload failed:",a),T("Upload tháº¥t báº¡i: "+a.message);const o=URL.createObjectURL(n);g(x=>({...x,image:o})),w({url:o,isTemporary:!0})}finally{H(!1),setTimeout(()=>y(0),1e3)}},ae=t=>{if(t.preventDefault(),u){alert("Vui lÃ²ng Ä‘á»£i áº£nh upload xong!");return}if(!r){p(!0),alert("Vui lÃ²ng nháº­p tÃªn trÆ°á»›c khi Ä‘Äƒng bÃ i!");return}d.image&&d.caption?(ee("momentsWall",{...d,likes:0,comments:[],createdAt:new Date().toISOString(),author:r}),g({image:"",caption:"",sticker:"ğŸ’œ"}),w(null),T(null),b(!1),M(!1),alert("âœ… Moment Ä‘Ã£ Ä‘Æ°á»£c thÃªm thÃ nh cÃ´ng! âœ¨")):alert("âŒ Vui lÃ²ng upload áº£nh vÃ  Ä‘iá»n chÃº thÃ­ch!")},B=(t,n)=>{if(n==null||n.stopPropagation(),!r){p(!0),alert("Vui lÃ²ng nháº­p tÃªn trÆ°á»›c khi thÃ­ch bÃ i viáº¿t!");return}const l=R(),i=l.includes(t),a=v.momentsWall.find(x=>x.id===t);if(!a)return;const o=typeof a.likes=="number"?a.likes:0;if(i){const x=l.filter(h=>h!==t);localStorage.setItem("momentsWall_liked",JSON.stringify(x)),z("momentsWall",t,{likes:Math.max(0,o-1)}),s&&s.id===t&&j(h=>({...h,likes:Math.max(0,(h.likes||0)-1)}))}else l.push(t),localStorage.setItem("momentsWall_liked",JSON.stringify(l)),z("momentsWall",t,{likes:o+1}),s&&s.id===t&&j(x=>({...x,likes:(x.likes||0)+1}))},J=async t=>{if(!C.trim())return;if(!r.trim()){p(!0),alert("Vui lÃ²ng nháº­p tÃªn trÆ°á»›c khi bÃ¬nh luáº­n!");return}_(!0);const n={id:Date.now().toString(),text:C,author:r,avatar:S(r),createdAt:new Date().toISOString(),userId:localStorage.getItem("momentsWall_userId")||re()},l=v.momentsWall.find(i=>i.id===t);if(l){const i=[...l.comments||[],n];z("momentsWall",t,{comments:i}),s&&s.id===t&&j(a=>({...a,comments:i}))}D(""),_(!1)},le=(t,n)=>{var o,x;const l=v.momentsWall.find(h=>h.id===t);if(!l)return;const i=(o=l.comments)==null?void 0:o.find(h=>h.id===n);if(!i)return;const a=localStorage.getItem("momentsWall_userId");if(i.userId!==a){alert("Báº¡n chá»‰ cÃ³ thá»ƒ xÃ³a comment cá»§a chÃ­nh mÃ¬nh!");return}if(window.confirm("Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a comment nÃ y?")){const h=((x=l.comments)==null?void 0:x.filter(U=>U.id!==n))||[];z("momentsWall",t,{comments:h}),s&&s.id===t&&j(U=>({...U,comments:h}))}},S=t=>{const n=["ğŸ‘¤","ğŸ‘¨â€ğŸ’»","ğŸ‘©â€ğŸ¨","ğŸ§‘â€ğŸ¤","ğŸ§‘â€ğŸš€","ğŸ‘¨â€ğŸ³","ğŸ‘©â€ğŸŒ¾","ğŸ§‘â€ğŸ”¬"];if(!t)return n[0];const l=t.charCodeAt(0);return n[l%n.length]},re=()=>{const t="user_"+Math.random().toString(36).substr(2,9);return localStorage.setItem("momentsWall_userId",t),t},X=t=>{j(t),document.body.style.overflow="hidden"},q=()=>{j(null),document.body.style.overflow="auto"},W=t=>{if(!t)return"Vá»«a xong";try{const n=new Date(t),i=new Date-n,a=Math.floor(i/6e4),o=Math.floor(i/36e5),x=Math.floor(i/864e5);return a<1?"Vá»«a xong":a<60?`${a} phÃºt trÆ°á»›c`:o<24?`${o} giá» trÆ°á»›c`:x<7?`${x} ngÃ y trÆ°á»›c`:n.toLocaleDateString("vi-VN")}catch{return"Vá»«a xong"}},K=t=>{const n=t==null?void 0:t.likes;if(typeof n=="number")return n;if(typeof n=="string"){const l=parseInt(n,10);return isNaN(l)?0:l}return 0},Y=()=>{g({image:"",caption:"",sticker:"ğŸ’œ"}),w(null),T(null),y(0),b(!1)};return e.jsxs("div",{className:"min-h-screen pt-24 px-4 pb-20 relative z-10",children:[e.jsx(Z,{children:te&&e.jsxs(e.Fragment,{children:[e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50"}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs(c.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative glass rounded-2xl p-8 max-w-md w-full",onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{className:"font-fredoka text-2xl text-lavender mb-4 text-center",children:"ğŸ‘‹ ChÃ o báº¡n!"}),e.jsx("p",{className:"font-nunito text-mint mb-6 text-center",children:"Nháº­p tÃªn cá»§a báº¡n Ä‘á»ƒ tham gia bÃ¬nh luáº­n vÃ  tháº£ tim"}),e.jsx("input",{type:"text",value:r,onChange:t=>O(t.target.value),placeholder:"TÃªn cá»§a báº¡n...",className:"w-full px-4 py-3 rounded-lg border-2 border-lavender/30 bg-dark/50 text-lavender font-nunito mb-4 outline-none",autoFocus:!0}),e.jsx("button",{onClick:()=>{r.trim()&&p(!1)},className:"w-full bg-gradient-to-r from-lavender to-pink text-white font-fredoka py-3 rounded-full",children:"Báº¯t Ä‘áº§u"})]})})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs(c.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"text-center mb-12",children:[e.jsx("h1",{className:"font-baloo text-6xl font-bold text-lavender neon-text mb-4",children:"ğŸ“Œ Moments Wall"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-2",children:[e.jsx("p",{className:"font-pacifico text-2xl text-mint",children:"Our daily magic captured"}),r&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-1 rounded-full bg-lavender/20",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-lavender/30 flex items-center justify-center",children:S(r)}),e.jsx("span",{className:"font-nunito text-lavender",children:r}),e.jsx("button",{onClick:()=>p(!0),className:"text-lavender/60 hover:text-lavender",title:"Äá»•i tÃªn",children:e.jsx(pe,{size:16})})]})]})]}),e.jsx("div",{className:"flex justify-center mb-12",children:e.jsxs(c.button,{onClick:()=>{if(!r){p(!0),alert("Vui lÃ²ng nháº­p tÃªn trÆ°á»›c khi Ä‘Äƒng bÃ i!");return}M(!k),k&&Y()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"glass px-8 py-4 rounded-full font-fredoka font-bold text-xl text-lavender border-2 border-lavender hover:bg-lavender hover:text-midnight transition-all duration-300 flex items-center gap-3 relative z-20",children:[k?e.jsx(A,{size:24}):e.jsx(de,{size:24}),k?"ÄÃ³ng form":"ThÃªm khoáº£nh kháº¯c má»›i"]})}),k&&e.jsxs(c.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"glass rounded-3xl p-8 mb-12 blur-shadow relative z-20",children:[e.jsx("h2",{className:"font-fredoka text-3xl text-lavender mb-6 text-center",children:"âœ¨ ThÃªm khoáº£nh kháº¯c má»›i"}),e.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-nunito font-semibold text-mint mb-2",children:"áº¢nh khoáº£nh kháº¯c *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:ne,disabled:u,className:"hidden",id:"moment-image-upload"}),e.jsx("label",{htmlFor:"moment-image-upload",className:`
                      flex items-center justify-center gap-3 w-full px-6 py-4 rounded-xl 
                      border-2 border-dashed cursor-pointer transition-all duration-300
                      ${u?"border-lavender bg-lavender/10 text-lavender":"border-lavender/40 hover:border-lavender hover:bg-lavender/5 text-lavender"}
                    `,children:u?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"animate-spin",size:24}),e.jsxs("span",{className:"font-nunito",children:["Äang upload... ",F,"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{size:24}),e.jsx("span",{className:"font-nunito",children:d.image?"Chá»n áº£nh khÃ¡c":"Chá»n áº£nh khoáº£nh kháº¯c"})]})}),u&&e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"h-2 bg-lavender/20 rounded-full overflow-hidden",children:e.jsx(c.div,{className:"h-full bg-gradient-to-r from-lavender to-pink",initial:{width:"0%"},animate:{width:`${F}%`},transition:{duration:.3}})})})]}),f&&e.jsx(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-4 rounded-lg bg-gradient-to-r from-lavender/10 to-pink/10 border border-lavender/20",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"text-mint",size:20}),e.jsx("span",{className:"font-nunito font-bold text-mint",children:f.isTemporary?"áº¢nh táº¡m thá»i":"Upload thÃ nh cÃ´ng!"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.isTemporary?"bg-amber-500/20 text-amber-300":"bg-mint/20 text-mint"}`,children:f.isTemporary?"Chá»‰ hiá»ƒn thá»‹ trÃªn mÃ¡y nÃ y":"Má»i ngÆ°á»i Ä‘á»u xem Ä‘Æ°á»£c"})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:f.url,className:"flex-1 px-3 py-2 rounded bg-dark/60 text-lavender text-sm truncate border border-lavender/20"}),e.jsxs("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(f.url),b(!0),setTimeout(()=>b(!1),2e3)},className:"px-3 py-2 rounded-lg bg-lavender/20 hover:bg-lavender/30 text-lavender font-nunito text-sm flex items-center gap-1 transition-colors",children:[e.jsx(xe,{size:14}),"Copy"]})]})})]}),f.thumbnail&&e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden border-2 border-lavender/30",children:e.jsx("img",{src:f.thumbnail,alt:"Preview",className:"w-full h-full object-cover"})})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-nunito text-sm text-mint mb-2",children:"Hoáº·c nháº­p URL áº£nh:"}),e.jsx("input",{type:"url",value:d.image,onChange:t=>g({...d,image:t.target.value}),placeholder:"https://example.com/image.jpg",className:"w-full px-4 py-3 rounded-lg border-2 border-lavender/30 focus:border-lavender bg-dark-lighter/80 text-lavender font-nunito outline-none placeholder:text-lavender/40 transition-all duration-300"})]}),$&&e.jsx("div",{className:"mt-3 p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:e.jsxs("p",{className:"font-nunito text-sm text-red-300 flex items-center gap-2",children:[e.jsx(ce,{size:16}),$]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-nunito font-semibold text-mint mb-2",children:"ChÃº thÃ­ch *"}),e.jsx("input",{type:"text",placeholder:"Äiá»u gÃ¬ Ä‘áº·c biá»‡t trong khoáº£nh kháº¯c nÃ y? ğŸ’œ",value:d.caption,onChange:t=>g({...d,caption:t.target.value}),className:"w-full px-6 py-4 rounded-lg glass border-2 border-lavender/30 focus:border-lavender bg-dark-lighter/80 text-lavender font-nunito text-lg outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-nunito font-semibold text-mint mb-2",children:"Chá»n sticker:"}),e.jsx("div",{className:"flex gap-3 flex-wrap justify-center",children:se.map(t=>e.jsx("button",{type:"button",onClick:()=>g({...d,sticker:t}),className:`text-4xl p-3 rounded-lg transition-all duration-200 ${d.sticker===t?"bg-lavender/30 transform scale-110 border-2 border-lavender":"hover:bg-lavender/10 border-2 border-transparent"}`,children:t},t))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(c.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:u||!d.image,className:`flex-1 bg-gradient-to-r from-lavender to-pink text-white font-fredoka font-bold text-xl py-4 rounded-full shadow-lg shadow-lavender/20 transition-all duration-300 hover:shadow-xl hover:shadow-lavender/30 ${u||!d.image?"opacity-50 cursor-not-allowed":""}`,children:u?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"animate-spin inline mr-2",size:20}),"Äang upload..."]}):"ÄÄƒng khoáº£nh kháº¯c âœ¨"}),e.jsxs(c.button,{type:"button",onClick:Y,whileHover:{scale:1.05},whileTap:{scale:.95},disabled:u,className:"px-8 border-2 border-lavender/40 bg-lavender/10 text-lavender font-nunito font-bold py-4 rounded-full flex items-center gap-2 hover:bg-lavender/20 transition-all duration-300",children:[e.jsx(A,{size:20}),"Há»§y"]})]})]}),d.image&&e.jsxs("div",{className:"mt-8 pt-8 border-t border-lavender/20",children:[e.jsx("h3",{className:"font-nunito text-lavender mb-4 text-center font-bold",children:"Preview:"}),e.jsxs("div",{className:"glass rounded-2xl p-4 max-w-xs mx-auto",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden rounded-lg mb-4",children:[e.jsx("img",{src:d.image,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 right-2 text-4xl",children:d.sticker})]}),e.jsx("p",{className:"font-nunito text-lavender text-center",children:d.caption||"Your caption will appear here"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:v.momentsWall&&v.momentsWall.length>0?v.momentsWall.slice().reverse().map((t,n)=>{var a;const l=N(t.id),i=K(t);return e.jsxs(c.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:n*.1},whileHover:{y:-5},className:"glass rounded-3xl overflow-hidden blur-shadow group relative z-10 cursor-pointer",onClick:()=>X(t),children:[e.jsxs("div",{className:"relative h-64 overflow-hidden",children:[e.jsx("img",{src:t.image,alt:t.caption,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-lavender/20 via-pink/20 to-mint/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsx("div",{className:"absolute top-4 right-4 text-5xl filter drop-shadow-lg pointer-events-none",children:t.sticker})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-lavender/20 flex items-center justify-center",children:S(t.author)}),e.jsx("span",{className:"font-nunito text-sm text-lavender/80",children:t.author})]}),e.jsx("p",{className:"font-nunito text-lg text-lavender mb-4 line-clamp-2",children:t.caption}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(c.button,{onClick:o=>{o.stopPropagation(),B(t.id,o)},whileHover:{scale:1.2},whileTap:{scale:.9},className:`flex items-center gap-2 transition-all duration-200 ${l?"text-pink transform scale-110":"text-pink/60 hover:text-pink hover:scale-105"}`,title:l?"Bá» thÃ­ch":"ThÃ­ch",children:[e.jsx(L,{size:24,fill:l?"currentColor":"none",className:l?"animate-pulse":""}),e.jsx("span",{className:"font-nunito font-bold",children:i})]}),e.jsxs("div",{className:"flex items-center gap-2 text-mint cursor-pointer",onClick:o=>{o.stopPropagation(),X(t)},children:[e.jsx(V,{size:24}),e.jsx("span",{className:"font-nunito font-bold",children:((a=t.comments)==null?void 0:a.length)||0})]})]}),t.createdAt&&e.jsx("span",{className:"font-nunito text-sm text-lavender/60",children:W(t.createdAt)})]})]})]},t.id)}):e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},className:"md:col-span-2 lg:col-span-3 glass rounded-3xl p-12 text-center",children:[e.jsx("div",{className:"text-8xl mb-6",children:"ğŸ“Œ"}),e.jsx("h3",{className:"font-fredoka text-3xl text-lavender mb-4",children:"ChÆ°a cÃ³ khoáº£nh kháº¯c nÃ o"}),e.jsx("p",{className:"font-nunito text-lg text-mint mb-6",children:"HÃ£y lÃ  ngÆ°á»i Ä‘áº§u tiÃªn chia sáº» khoáº£nh kháº¯c Ä‘áº·c biá»‡t!"}),e.jsx(c.button,{onClick:()=>{if(!r){p(!0),alert("Vui lÃ²ng nháº­p tÃªn trÆ°á»›c khi Ä‘Äƒng bÃ i!");return}M(!0)},whileHover:{scale:1.05},whileTap:{scale:.95},className:"glass px-8 py-3 rounded-full text-lavender font-nunito font-bold border-2 border-lavender hover:bg-lavender hover:text-dark transition-all duration-300",children:"Táº¡o khoáº£nh kháº¯c Ä‘áº§u tiÃªn"})]})})]}),e.jsx(Z,{children:s&&e.jsxs(e.Fragment,{children:[e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:q,className:"fixed inset-0 bg-black/90 backdrop-blur-md z-50"}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:e.jsxs(c.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25},className:"relative w-full max-w-6xl max-h-[90vh] bg-dark-lighter rounded-2xl overflow-hidden shadow-2xl pointer-events-auto flex flex-col",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:q,className:"absolute top-4 right-4 z-20 w-10 h-10 rounded-full bg-black/70 hover:bg-black/90 flex items-center justify-center transition-all duration-200",children:e.jsx(A,{size:20,className:"text-white"})}),e.jsxs("div",{className:"flex flex-col md:flex-row h-full",children:[e.jsxs("div",{className:"md:w-2/3 bg-black flex items-center justify-center p-4 relative",children:[e.jsx("img",{src:s.image,alt:s.caption,className:"max-w-full max-h-[70vh] object-contain rounded-lg"}),e.jsx("div",{className:"absolute top-8 right-8 text-6xl filter drop-shadow-lg pointer-events-none",children:s.sticker})]}),e.jsxs("div",{className:"md:w-1/3 flex flex-col border-l border-white/10",children:[e.jsxs("div",{className:"p-6 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-lavender/20 flex items-center justify-center text-2xl",children:S(s.author)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-nunito font-bold text-lavender",children:s.author}),e.jsx("p",{className:"font-nunito text-lavender mt-2",children:s.caption}),s.createdAt&&e.jsx("span",{className:"font-nunito text-xs text-lavender/60 mt-2 block",children:W(s.createdAt)})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-pink",children:[e.jsx(L,{size:20,fill:"currentColor"}),e.jsxs("span",{className:"font-nunito font-bold",children:[K(s)," lÆ°á»£t thÃ­ch"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-mint",children:[e.jsx(V,{size:20}),e.jsxs("span",{className:"font-nunito font-bold",children:[((Q=s.comments)==null?void 0:Q.length)||0," bÃ¬nh luáº­n"]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 max-h-[300px]",children:[s.comments&&s.comments.length>0?s.comments.map(t=>{const n=t.userId===localStorage.getItem("momentsWall_userId");return e.jsxs("div",{className:"flex gap-3 group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-lavender/20 flex items-center justify-center text-xl flex-shrink-0",children:t.avatar}),e.jsx("div",{className:"flex-1 relative",children:e.jsxs("div",{className:"bg-dark/50 rounded-2xl rounded-tl-none p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-nunito font-bold text-lavender text-sm",children:t.author}),e.jsx("span",{className:"font-nunito text-xs text-lavender/60",children:W(t.createdAt)})]}),n&&e.jsx("button",{onClick:()=>le(s.id,t.id),className:"opacity-0 group-hover:opacity-100 text-lavender/60 hover:text-red-400 transition-opacity",title:"XÃ³a comment",children:e.jsx(ve,{size:14})})]}),e.jsx("p",{className:"font-nunito text-lavender mt-1",children:t.text})]})})]},t.id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{size:48,className:"mx-auto text-lavender/30 mb-4"}),e.jsx("p",{className:"font-nunito text-lavender/60",children:"ChÆ°a cÃ³ bÃ¬nh luáº­n nÃ o. HÃ£y lÃ  ngÆ°á»i Ä‘áº§u tiÃªn!"})]}),e.jsx("div",{ref:I})]}),e.jsxs("div",{className:"p-4 border-t border-white/10",children:[e.jsx("div",{className:"flex gap-4 mb-4",children:e.jsxs(c.button,{onClick:t=>B(s.id,t),whileTap:{scale:.95},className:`flex items-center gap-2 transition-all duration-200 ${N(s.id)?"text-pink transform scale-105":"text-pink/60 hover:text-pink"}`,title:N(s.id)?"Bá» thÃ­ch":"ThÃ­ch",children:[e.jsx(L,{size:24,fill:N(s.id)?"currentColor":"none",className:N(s.id)?"animate-pulse":""}),e.jsx("span",{className:"font-nunito font-bold",children:N(s.id)?"ÄÃ£ thÃ­ch":"ThÃ­ch"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-lavender/20 flex items-center justify-center text-xl flex-shrink-0",children:S(r)}),e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:C,onChange:t=>D(t.target.value),placeholder:"Viáº¿t bÃ¬nh luáº­n...",className:"flex-1 px-4 py-2 rounded-full bg-dark/50 border border-white/10 text-lavender font-nunito outline-none placeholder:text-lavender/40",onKeyPress:t=>t.key==="Enter"&&J(s.id)}),e.jsx(c.button,{onClick:()=>J(s.id),disabled:!C.trim()||E,whileTap:{scale:.95},className:`px-4 rounded-full flex items-center gap-2 ${C.trim()?"bg-lavender text-dark":"bg-lavender/30 text-lavender/50"}`,children:E?e.jsx(P,{className:"animate-spin",size:16}):e.jsx(fe,{size:16})})]})]}),!r&&e.jsxs("p",{className:"text-center text-amber-300 text-sm mt-2",children:[e.jsx("button",{onClick:()=>p(!0),className:"underline",children:"Nháº­p tÃªn"})," Ä‘á»ƒ bÃ¬nh luáº­n vÃ  tháº£ tim"]})]})]})]})]})})]})})]})};export{we as default};
