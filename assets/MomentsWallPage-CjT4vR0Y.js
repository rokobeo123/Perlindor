import{g as F,h as M,r as c,j as e,k as s,X as w,l as W}from"./index-C4u3V6Ed.js";import{P as L,L as C,U as R,C as $,a as E,v as A,b as O}from"./adminUpload-Cc5pkwdX.js";import{H as V}from"./heart-BpWIqjO0.js";const D=F("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),G=()=>{const{data:p,addItem:T,updateItem:z}=M(),[h,b]=c.useState(!1),[a,o]=c.useState({image:"",caption:"",sticker:"ðŸ’œ"}),[n,f]=c.useState(!1),[j,x]=c.useState(0),[i,u]=c.useState(null),[q,m]=c.useState(!1),[N,v]=c.useState(null),U=["ðŸ’œ","â­","âœ¨","ðŸŒ™","ðŸ’«","ðŸ¦‹","ðŸŒ¸","ðŸŽ€","ðŸ’–","â˜ï¸"],S=async t=>{const r=t.target.files[0];if(!r)return;const d=A(r);if(!d.valid){alert(d.error);return}f(!0),x(0),u(null),v(null);const k=setInterval(()=>{x(l=>l>=90?(clearInterval(k),90):l+10)},300);try{const l=await O(r);if(clearInterval(k),x(100),l.success)o(g=>({...g,image:l.url})),u({url:l.url,thumbnail:l.thumb||l.url,size:l.size,isTemporary:l.isTemporary||!1}),navigator.clipboard&&(navigator.clipboard.writeText(l.url),m(!0),setTimeout(()=>m(!1),3e3));else throw new Error("Upload khÃ´ng thÃ nh cÃ´ng")}catch(l){console.error("Upload failed:",l),v("Upload tháº¥t báº¡i: "+l.message);const g=URL.createObjectURL(r);o(P=>({...P,image:g})),u({url:g,isTemporary:!0})}finally{f(!1),setTimeout(()=>x(0),1e3)}},H=t=>{if(t.preventDefault(),n){alert("Vui lÃ²ng Ä‘á»£i áº£nh upload xong!");return}a.image&&a.caption?(T("momentsWall",{...a,likes:0,comments:[]}),o({image:"",caption:"",sticker:"ðŸ’œ"}),u(null),v(null),m(!1),b(!1),alert("âœ… Moment Ä‘Ã£ Ä‘Æ°á»£c thÃªm thÃ nh cÃ´ng! âœ¨")):alert("âŒ Vui lÃ²ng upload áº£nh vÃ  Ä‘iá»n chÃº thÃ­ch!")},I=t=>{const r=p.momentsWall.find(d=>d.id===t);r&&z("momentsWall",t,{likes:r.likes+1})},y=()=>{o({image:"",caption:"",sticker:"ðŸ’œ"}),u(null),v(null),x(0),m(!1)};return e.jsx("div",{className:"min-h-screen pt-24 px-4 pb-20 relative z-10",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs(s.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"text-center mb-12",children:[e.jsx("h1",{className:"font-baloo text-6xl font-bold text-lavender neon-text mb-4",children:"ðŸ“Œ Moments Wall"}),e.jsx("p",{className:"font-pacifico text-2xl text-mint",children:"Our daily magic captured"})]}),e.jsx("div",{className:"flex justify-center mb-12",children:e.jsxs(s.button,{onClick:()=>{b(!h),h&&y()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"glass px-8 py-4 rounded-full font-fredoka font-bold text-xl text-lavender border-2 border-lavender hover:bg-lavender hover:text-midnight transition-all duration-300 flex items-center gap-3 relative z-20",children:[h?e.jsx(w,{size:24}):e.jsx(L,{size:24}),h?"ÄÃ³ng form":"ThÃªm khoáº£nh kháº¯c má»›i"]})}),h&&e.jsxs(s.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"glass rounded-3xl p-8 mb-12 blur-shadow relative z-20",children:[e.jsx("h2",{className:"font-fredoka text-3xl text-lavender mb-6 text-center",children:"âœ¨ ThÃªm khoáº£nh kháº¯c má»›i"}),e.jsxs("form",{onSubmit:H,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-nunito font-semibold text-mint mb-2",children:"áº¢nh khoáº£nh kháº¯c *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:S,disabled:n,className:"hidden",id:"moment-image-upload"}),e.jsx("label",{htmlFor:"moment-image-upload",className:`
                      flex items-center justify-center gap-3 w-full px-6 py-4 rounded-xl 
                      border-2 border-dashed cursor-pointer transition-all duration-300
                      ${n?"border-lavender bg-lavender/10 text-lavender":"border-lavender/40 hover:border-lavender hover:bg-lavender/5 text-lavender"}
                    `,children:n?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"animate-spin",size:24}),e.jsxs("span",{className:"font-nunito",children:["Äang upload... ",j,"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{size:24}),e.jsx("span",{className:"font-nunito",children:a.image?"Chá»n áº£nh khÃ¡c":"Chá»n áº£nh khoáº£nh kháº¯c"})]})}),n&&e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"h-2 bg-lavender/20 rounded-full overflow-hidden",children:e.jsx(s.div,{className:"h-full bg-gradient-to-r from-lavender to-pink",initial:{width:"0%"},animate:{width:`${j}%`},transition:{duration:.3}})})})]}),i&&e.jsx(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-4 rounded-lg bg-gradient-to-r from-lavender/10 to-pink/10 border border-lavender/20",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($,{className:"text-mint",size:20}),e.jsx("span",{className:"font-nunito font-bold text-mint",children:i.isTemporary?"áº¢nh táº¡m thá»i":"Upload thÃ nh cÃ´ng!"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i.isTemporary?"bg-amber-500/20 text-amber-300":"bg-mint/20 text-mint"}`,children:i.isTemporary?"Chá»‰ hiá»ƒn thá»‹ trÃªn mÃ¡y nÃ y":"Má»i ngÆ°á»i Ä‘á»u xem Ä‘Æ°á»£c"})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:i.url,className:"flex-1 px-3 py-2 rounded bg-dark/60 text-lavender text-sm truncate border border-lavender/20"}),e.jsxs("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(i.url),m(!0),setTimeout(()=>m(!1),2e3)},className:"px-3 py-2 rounded-lg bg-lavender/20 hover:bg-lavender/30 text-lavender font-nunito text-sm flex items-center gap-1 transition-colors",children:[e.jsx(E,{size:14}),"Copy"]})]})})]}),i.thumbnail&&e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden border-2 border-lavender/30",children:e.jsx("img",{src:i.thumbnail,alt:"Preview",className:"w-full h-full object-cover"})})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-nunito text-sm text-mint mb-2",children:"Hoáº·c nháº­p URL áº£nh:"}),e.jsx("input",{type:"url",value:a.image,onChange:t=>o({...a,image:t.target.value}),placeholder:"https://example.com/image.jpg",className:"w-full px-4 py-3 rounded-lg border-2 border-lavender/30 focus:border-lavender bg-dark-lighter/80 text-lavender font-nunito outline-none placeholder:text-lavender/40 transition-all duration-300"})]}),N&&e.jsx("div",{className:"mt-3 p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:e.jsxs("p",{className:"font-nunito text-sm text-red-300 flex items-center gap-2",children:[e.jsx(W,{size:16}),N]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-nunito font-semibold text-mint mb-2",children:"ChÃº thÃ­ch *"}),e.jsx("input",{type:"text",placeholder:"Äiá»u gÃ¬ Ä‘áº·c biá»‡t trong khoáº£nh kháº¯c nÃ y? ðŸ’œ",value:a.caption,onChange:t=>o({...a,caption:t.target.value}),className:"w-full px-6 py-4 rounded-lg glass border-2 border-lavender/30 focus:border-lavender bg-dark-lighter/80 text-lavender font-nunito text-lg outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-nunito font-semibold text-mint mb-2",children:"Chá»n sticker:"}),e.jsx("div",{className:"flex gap-3 flex-wrap justify-center",children:U.map(t=>e.jsx("button",{type:"button",onClick:()=>o({...a,sticker:t}),className:`text-4xl p-3 rounded-lg transition-all duration-200 ${a.sticker===t?"bg-lavender/30 transform scale-110 border-2 border-lavender":"hover:bg-lavender/10 border-2 border-transparent"}`,children:t},t))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(s.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:n||!a.image,className:`flex-1 bg-gradient-to-r from-lavender to-pink text-white font-fredoka font-bold text-xl py-4 rounded-full shadow-lg shadow-lavender/20 transition-all duration-300 hover:shadow-xl hover:shadow-lavender/30 ${n||!a.image?"opacity-50 cursor-not-allowed":""}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"animate-spin inline mr-2",size:20}),"Äang upload..."]}):"ÄÄƒng khoáº£nh kháº¯c âœ¨"}),e.jsxs(s.button,{type:"button",onClick:y,whileHover:{scale:1.05},whileTap:{scale:.95},disabled:n,className:"px-8 border-2 border-lavender/40 bg-lavender/10 text-lavender font-nunito font-bold py-4 rounded-full flex items-center gap-2 hover:bg-lavender/20 transition-all duration-300",children:[e.jsx(w,{size:20}),"Há»§y"]})]})]}),a.image&&e.jsxs("div",{className:"mt-8 pt-8 border-t border-lavender/20",children:[e.jsx("h3",{className:"font-nunito text-lavender mb-4 text-center font-bold",children:"Preview:"}),e.jsxs("div",{className:"glass rounded-2xl p-4 max-w-xs mx-auto",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden rounded-lg mb-4",children:[e.jsx("img",{src:a.image,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 right-2 text-4xl",children:a.sticker})]}),e.jsx("p",{className:"font-nunito text-lavender text-center",children:a.caption||"Your caption will appear here"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:p.momentsWall&&p.momentsWall.length>0?p.momentsWall.slice().reverse().map((t,r)=>{var d;return e.jsxs(s.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:r*.1},whileHover:{y:-5},className:"glass rounded-3xl overflow-hidden blur-shadow group relative z-10",children:[e.jsxs("div",{className:"relative h-64 overflow-hidden",children:[e.jsx("img",{src:t.image,alt:t.caption,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-lavender/20 via-pink/20 to-mint/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsx(s.div,{animate:{rotate:[-5,5,-5],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0},className:"absolute top-4 right-4 text-5xl filter drop-shadow-lg",children:t.sticker})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"font-nunito text-lg text-lavender mb-4",children:t.caption}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(s.button,{onClick:()=>I(t.id),whileHover:{scale:1.2},whileTap:{scale:.9},className:"flex items-center gap-2 text-pink",children:[e.jsx(V,{size:24,fill:"currentColor"}),e.jsx("span",{className:"font-nunito font-bold",children:t.likes})]}),e.jsxs("div",{className:"flex items-center gap-2 text-mint",children:[e.jsx(D,{size:24}),e.jsx("span",{className:"font-nunito font-bold",children:((d=t.comments)==null?void 0:d.length)||0})]})]})]})]},t.id)}):e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"md:col-span-2 lg:col-span-3 glass rounded-3xl p-12 text-center",children:[e.jsx("div",{className:"text-8xl mb-6",children:"ðŸ“Œ"}),e.jsx("h3",{className:"font-fredoka text-3xl text-lavender mb-4",children:"ChÆ°a cÃ³ khoáº£nh kháº¯c nÃ o"}),e.jsx("p",{className:"font-nunito text-lg text-mint mb-6",children:"HÃ£y lÃ  ngÆ°á»i Ä‘áº§u tiÃªn chia sáº» khoáº£nh kháº¯c Ä‘áº·c biá»‡t!"}),e.jsx(s.button,{onClick:()=>b(!0),whileHover:{scale:1.05},whileTap:{scale:.95},className:"glass px-8 py-3 rounded-full text-lavender font-nunito font-bold border-2 border-lavender hover:bg-lavender hover:text-dark transition-all duration-300",children:"Táº¡o khoáº£nh kháº¯c Ä‘áº§u tiÃªn"})]})})]})})};export{G as default};
